import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;

public class SerializerDonnees {
	
	/**
	 * Serialisation des données.
	 * Ecriture des donnees utiles au chargement d'un niveau dans le fichier correspondant à ce niveau.
	 * 
	 */
	public static void main(final String argv[])
	{	
		/**
		 * Layer Pacman & Murs
		 * 1 -> Murs
		 * 2 -> Pacman
		 */
		int[][] plateau0 = {
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1},
				{1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1},
				{1,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,1},
				{1,1,1,0,1,1,0,1,0,0,0,1,0,1,1,0,1,1,1},
				{1,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1},
				{1,0,1,1,0,1,0,0,0,1,0,0,0,1,0,1,1,0,1},
				{1,0,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,0,1},
				{1,1,0,1,0,0,0,0,0,2,0,0,0,0,0,1,0,1,1},
				{1,1,0,1,0,1,0,1,1,0,1,1,0,1,0,1,0,1,1},
				{1,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,1},
				{1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1},
				{1,0,1,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,1},
				{1,0,1,0,1,1,1,1,0,1,0,1,1,1,1,0,1,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1},
				{1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1},
				{1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
				};
		
		/**
		 * Layer Ghosts
		 * 3 -> Ghosts
		 */
		int[][] plateau1 = {
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				};
		
		/**
		 * Layer PacGommes
		 * 1  -> normal
		 * 10 -> super
		 */
		int[][] plateau2 = {
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0},
				{0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0},
				{0,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,0},
				{0,0,0,1,0,0,1,0,1,1,1,0,1,0,0,1,0,0,0},
				{0,10,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,10,0},
				{0,1,0,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,0},
				{0,1,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,1,0},
				{0,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,0},
				{0,0,1,0,1,0,1,0,0,1,0,0,1,0,1,0,1,0,0},
				{0,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0},
				{0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0},
				{0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0},
				{0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0},
				{0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,0},
				{0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0},
				{0,10,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,10,0},
				{0,1,1,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0},
				{0,1,1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,1,0},
				{0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0},
				{0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
				};
		/**
		 * Tableau des points pour les Pac-Gommes.
		 * le nombre de points d'une Pac-gomme, dépendant de son type:
		 * 1)  normal:10 pts
		 * 2)  cerise:100 pts
		 * 3)  fraise:300 pts
		 * 4)  orange:500 pts
		 * 5)  pomme:700 pts
		 * 6)  melon:1000 pts
		 * 7)  galbosse:2000 pts
		 * 8)  cloche:3000 pts
		 * 9)  cle:5000 pts
		 * 10) super:50 pts
		 */
		final int[] tableauNbPoints = 
			{0,10,100,300,500,700,1000,2000,3000,5000,50};
		
		final Ghost ghost1 = new Ghost(2,1,1);
		final Ghost ghost2 = new Ghost(2,17,1);
		final Ghost ghost3 = new Ghost(2,1,20);
		final Ghost ghost4 = new Ghost(2,17,20);
		final Pacman pacman = new Pacman(1,9,8);
		final Layout layoutPacmanMurs = new Layout(plateau0,0);
		final Layout layoutGhost = new Layout(plateau1,1);
		final Layout layoutPacgommes = new Layout(plateau2,2);
		final Layout[] tabLayout = {layoutPacmanMurs, layoutGhost, layoutPacgommes};
		final Ghost[] tabGhosts = {ghost1, ghost2, ghost3, ghost4};
		final Level level = new Level(20,1.57,204,tabLayout);
		System.out.println(level.getNumLevel());
		
		
		ObjectOutputStream oos = null;
		
		try {
		  final FileOutputStream fichier = new FileOutputStream("level" + level.getNumLevel() + ".ser");
		  oos = new ObjectOutputStream(fichier);
		  oos.writeObject(level);
		  oos.writeObject(tabGhosts);
		  oos.writeObject(pacman);
		  oos.writeObject(tableauNbPoints);
		  
		  oos.flush();
		} catch (final java.io.IOException e) {
			e.printStackTrace();
		} finally {
			try {
				if (oos != null) {
					oos.flush();
					oos.close();
				}
			} catch (final IOException ex) {
				ex.printStackTrace();
			}
		}
		
	}
}
